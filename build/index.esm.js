import e,{useRef as t,useEffect as n,useCallback as o,useState as r}from"react";import i from"@monaco-editor/react";export{useMonaco}from"@monaco-editor/react";var a=function(){return a=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var l=function(t){var n=t.size,o=void 0===n?16:n,r=t.color,i=void 0===r?"#0078d4":r;return e.createElement("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:i},e.createElement("path",{d:"M19 21H9c-1.1 0-2-.9-2-2V7h2v12h10v2zm-4-4H5V5h10v12z"}))},c=function(t){var n=t.size,o=void 0===n?16:n,r=t.color,i=void 0===r?"#28a745":r;return e.createElement("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:i},e.createElement("path",{d:"M3 3h18v2H3V3zm0 16h18v2H3v-2zm0-8h18v2H3v-2z"}))};var u=function(u){var s,d,v,m,f=u.title,p=u.language,h=void 0===p?"json":p,g=u.value,y=u.options,b=u.readOnly,O=void 0!==b&&b,E=u.rawJson,w=void 0!==E&&E,z=u.style,S=u.getRefs,x=u.onChange,C=u.debounceMs,J=void 0===C?300:C,N=u.tabSize,H=void 0===N?4:N,j=u.theme,M=void 0===j?"vs-light":j,P=u.autoResize,R=void 0!==P&&P,T=u.labels,F=u.icons,L=u.showHeader,V=void 0===L||L,k=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(u,["title","language","value","options","readOnly","rawJson","style","getRefs","onChange","debounceMs","tabSize","theme","autoResize","labels","icons","showHeader"]),A=r(""),B=A[0],D=A[1],I=r(300),W=I[0],q=I[1],G=t(null),K=(s=t(!1),n(function(){return s.current=!0,function(){s.current=!1}},[]),o(function(){return s.current},[])),Q="json"===h.toLowerCase(),U=(d=function(e,t){return null==x?void 0:x(e,t)},v=J,m=t(null),o(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];m.current&&clearTimeout(m.current),m.current=setTimeout(function(){d.apply(void 0,e)},v)},[d,v]));return n(function(){K()&&D(function(e){if(!e)return"";if(Q)try{return JSON.stringify(JSON.parse(e),null,H)}catch(t){return e}return e}(g))},[g,K,H]),e.createElement("div",{className:"editor-container",style:a({margin:"20px auto",maxWidth:1200,height:"".concat(R?W+(V?35:0):300+(V?35:0),"px"),borderRadius:10,overflow:"hidden"},z)},V&&e.createElement("div",{className:"editor-menu ".concat(O?"read-only":"")},e.createElement("span",null,f||"Json Editor"),e.createElement("div",{style:{marginLeft:"auto",display:"flex",gap:8}},e.createElement("button",{className:"editor-btn",onClick:function(){return navigator.clipboard.writeText(B)},title:(null==T?void 0:T.copy)||"Copy"},(null==F?void 0:F.copy)||e.createElement(l,{size:16,color:"#0078d4"}),e.createElement("span",null,(null==T?void 0:T.copy)||"Copy")),Q&&e.createElement("button",{className:"editor-btn",onClick:function(){var e,t;return null===(t=null===(e=G.current)||void 0===e?void 0:e.getAction("editor.action.formatDocument"))||void 0===t?void 0:t.run()},title:(null==T?void 0:T.formatJson)||"Format JSON"},(null==F?void 0:F.formatJson)||e.createElement(c,{size:16,color:"#28a745"}),e.createElement("span",null,(null==T?void 0:T.formatJson)||"Format JSON")))),e.createElement("div",{className:"editor-wrapper"},e.createElement(i,a({theme:M,width:"100%",height:"100%",language:h,value:B,onChange:function(e){var t,n,o=e||"";if(D(o),o){if(Q)try{JSON.parse(o),U(o,!1)}catch(e){U(w?o:void 0,!w)}else U(o,!1);if(R&&G.current){var r=(null===(n=(t=G.current).getContentHeight)||void 0===n?void 0:n.call(t))||18*o.split("\n").length+30;q(Math.max(100,Math.min(r,800)))}}else U("",!1)},options:a({cursorStyle:"line",formatOnPaste:!0,formatOnType:!0,renderLineHighlight:"none",wordWrap:"on",autoIndent:"full",readOnly:O||(null==y?void 0:y.readOnly),fontSize:14,tabSize:H,fontFamily:"Consolas, 'Courier New', monospace",minimap:{enabled:!1}},y),onMount:function(e){var t;G.current=e,null===(t=e.getAction("editor.action.formatDocument"))||void 0===t||t.run(),null==S||S(G)}},k))))};export{u as CodeEditor,u as default};
